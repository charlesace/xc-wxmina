<!-- pages/order/order.wxml -->
<view class="page" scroll-y="true">
    <view class="order-page">
        <view class="page__hd">
            <view class="product-name">{{productName}}</view>
            <view class="input-tip">请输入消费总金额</view>
            <view class="input-container">
                <text class="unit">￥</text>
                <input type="digit" confirm-type="done" adjust-position="false" :value="{{orderAmount}}" bindinput="bindinputOrderAmount"></input>
            </view>
        </view>
        <view class="page__bd">
            <!--  -->
            <!-- <view class="weui-panel">
            <view class="weui-cell weui-cell_link">
                <view class="weui-cell__bd">开发商</view>
                <view class="value">XXX 建筑公司</view>
                <view class="weui-cell__ft weui-cell__ft_in-access"></view>
            </view>
            <view class="weui-cell weui-cell_link">
                <view class="weui-cell__bd">中介商</view>
                <view class="value">XXX 房产公司</view>
                <view class="weui-cell__ft weui-cell__ft_in-access"></view>
            </view>
        </view> -->
            <view class="weui-panel">
                <!-- member Info -->
                <view class="weui-cell weui-cell_link" wx:for="{{members}}" wx:if="{{item.is_member_show}}" wx:key="role_code" data-search="{{item}}" bindtap="searchMember">
                    <view class="weui-cell__bd">{{item.role_name}}</view>
                    <view class="value">{{item.assigned_member_name}}</view>
                    <view class="weui-cell__ft weui-cell__ft_in-access" wx:if="{{item.is_member_updatable}}"></view>
                </view>
                <!-- orderConfig -->
                <view class="order-cell" wx:for="{{orderConfig}}" wx:key="field">
                    <view class="order-cell-input" wx:if="{{item.control === 'TextInput'}}">
                        <view class="order-cell___hd">
                            <view class="order-cell-label">{{item.label}}</view>
                        </view>
                        <view class="order-cell__bd">
                            <input type="digit" bindinput="orderConfigChange" data-item="{{item}}" class="order-cell-value"></input>
                        </view>
                    </view>
                </view>
            </view>
            <!-- 客户信息 -->
            <view class="weui-panel" wx:if="{{isCreateMember}}">
                <view class="weui-panel__hd">客户信息</view>
                <view class="weui-panel__bd">
                    <view class="weui-cell weui-cell_link" bindtap="showQrcodeModal">
                        <view class="weui-cell__bd">
                            扫码认证
                            <text class="auth-needed"
                                hidden="{{mobile}}">待认证</text>
                            <text class="auth-pass"
                                hidden="{{!mobile}}">已认证</text>
                        </view>
                        <view class="weui-cell__ft">
                            <text class="iconfont icon-qrcode"
                                hidden="{{mobile}}"></text>
                            <text hidden="{{!mobile}}">{{mobile}}</text>
                        </view>
                    </view>
                </view>
            </view>
        </view>
        <modal no-cancel="true" hidden="{{hiddenQrcode}}" bindconfirm="closeQrcodeModal">
            <canvas class="canvas" canvas-id="canvas" bindlongtap="save"></canvas>
        </modal>
        <view class="page__ft">
            <button class="btn-confirm" bindtap="orderConfirm">确认下单</button>
        </view>
    </view>
    <view class="search-page"
        hidden="{{searchPageHidden}}">
        <view class="page__bd">
            <view class="weui-search-bar">
                <view class="weui-search-bar__form">
                    <view class="weui-search-bar__box">
                        <icon class="weui-icon-search_in-box" type="search" size="14"></icon>
                        <input type="text" class="weui-search-bar__input" placeholder="搜索" value="{{inputVal}}" focus="{{inputShowed}}" bindinput="inputTyping" />
                        <view class="weui-icon-clear" wx:if="{{inputVal.length > 0}}" bindtap="clearInput">
                            <icon type="clear" size="14"></icon>
                        </view>
                    </view>
                    <label class="weui-search-bar__label" hidden="{{inputShowed}}" bindtap="showInput">
                        <icon class="weui-icon-search" type="search" size="14"></icon>
                        <view class="weui-search-bar__text">搜索</view>
                    </label>
                </view>
                <!-- <view class="weui-search-bar__cancel-btn" hidden="{{!inputShowed}}" bindtap="hideInput">
                    取消
                </view> -->
            </view>
            <view class="weui-cells searchbar-result">
                <view class="weui-cell"
                    wx:for="{{searchList}}"
                    wx:key="{{item.id}}"
                    data-item="{{item}}"
                    hover-class="weui-cell_active"
                    bindtap="chooseMember">
                    <view class="weui-cell__bd">
                        <view>{{item.name}}</view>
                    </view>
                    <view class="weui-cell__ft"
                        wx:if="{{item.selected}}">
                    >?</view>
                </view>
            </view>
        </view>
    </view>
</view>